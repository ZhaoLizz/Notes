# 物理层
物理层是网络协议模型的最底层，该层定义了比特作为信号在信道上发送时相关的电器，时序和其他接口．

## 一.数据通信的理论基础

### 1. 傅里叶分析
傅里叶级数:任何一个行为合理的周期为T的函数g(t),都可以表示成**用正弦函数和余弦函数组成的无穷级数**  
        $g(t) = \frac 1 2 c + \sum _{n=1}^ \infty a_nsin(2\pi n f t) +  \sum _{n=1}^ \infty b_n cos(2\pi nft)$

* f=1/T 是基本频率
* $a_n, b_n$是**n次谐波**的正弦振幅和余弦振幅.c是常数.
* 傅里叶级数说明:**如果已知周期T,并且给定振幅,则利用傅里叶公式求和可以得到时间的原始函数g(t)**

1. 对于任何给定的g(t),在傅里叶级数公式两边同乘$sin(2\pi kft)$,  
由:![](https://ws1.sinaimg.cn/large/0077h8xtly1fq0z31yckkj30bt01rweg.jpg)  
然后从0到T求积分,则可计算出振幅$a_n$.

2. 类似的,在傅里叶级数公式两边同乘$cos(2\pi kft)$,然后从0到T求积分,同样可以计算出$b_n$.  
3. 另外,直接在等式两边求积分,可以得到c.结果如下.

$a_n = \frac 2 T \int_0^T g(t)sin(2\pi nft)dt$  
$b_n = \frac 2 T \int _0 ^ T g(t)cos(2\pi nft)dt$  
$c = \frac 2 T \int _0 ^T g(t)dt$

### 2. 带宽有限的信号
傅里叶分析的意义:所有的传输设施在传输过程中都要损失一些能量.如果把所有的傅里叶分量都等量地衰减,则结果信号将将会在振幅上有所减小,但不会变形.

* 谐波号即傅里叶级数的n次谐波
* 对于数字传输来说,目标是接收到的信号的精度 能够还原出原始发送比特的序列.由图得知,在不断地增加谐波号的过程中,谐波号为8时已经足够可以还原出原始发送比特序列了.因此如果使用过多的谐波来接收更为精确的比特显然是浪费的.


![](https://ws1.sinaimg.cn/large/0077h8xtly1fq2wrnc776j30na06bq4k.jpg)  
![](https://ws1.sinaimg.cn/large/0077h8xtly1fq2wsrdogij30ff0j7tai.jpg)

带宽的定义:   
* 由于所有的传输设施对于不同的傅里叶分量的衰减程度不同,导致了接收端接收到的结果产生变形.  
* 一般情况下对于导线而言,在0到某个**截止频率**$f_c$这段范围内,振幅在传输的过程中不会衰减,而在此截止频率$f_c$之上的所有频率的振幅都会以后不同程度的衰减.  
* 因此定义,**在传输过程中振幅不会明显减弱的频率的宽度就称为带宽**.
    * 带宽是指通过的频率的宽度,其所承载的信息仅仅取决于这个频率的宽度而不是频率的起始位置和终止位置.
    * 一般将从0到某个最大频率的信号称为**基带**信号.
* 带宽是传输介质的一种物理特性,通常取决于介质的构成,厚度或者光纤的长度

### 3. 信道的最大数据速率

#### 倪奎思定理:理想无噪声信道的最大数据速率
* 倪奎思定理:  
最大数据速率 = 2B$\log_2V$(比特/秒)
   * V: 信号包含的V个离散等级
   * B: 带宽

定理证明,如果一个任意信号通过了一个**带宽为B**的低通滤波器,那么只要进行**每秒2B次**采样,就可以完全重构出被过滤的信号.  
由于通过样值能恢复出来的高频成分已经被过滤掉了,所以高于**每秒2B次**的采样毫无意义.
* 例如,无噪声的3kHz的信道不可能以超过6000bps的速率传输二进制(即只有两级,V=2)的信号

 #### 热噪声
 热噪声即随机噪声,它总是存在的.热噪声的数量可以用**信号功率与噪声功率的比值**来度量,比值称为**信噪比**(Singal-to-Noise Ratio).  
为了适用更大的范围,将信噪比表示成对数形式:  
* 信噪比SNR = 10 $\log_{10} S/N$
   * S:信号功率
   * N:噪声功率
   * SNR单位:dB分贝  

#### 香农定理: 热噪声下的实际信道能获得的最大数据速率
* 最大比特率 = $B \log _2 (1 + S / N)$
	* B: 带宽为 B Hz
	* S/N : 信噪比
	* 最大比特率即最大速率或者容量


## 二.引导性传输介质
### 1. 磁介质
将数据从一台机器传输到另一台机器最常见的办法是将数据写到磁带或者其他可擦写的介质上,然后用物理的方法将磁带或者磁盘运送到目标机器,再将数据从磁带或磁盘里读出来.

### 2. 双绞线
#### 非屏蔽双绞线
双绞线由两根**相互绝缘的铜线**组成.
* 将两根铜线缠绕在一起,两根平行的线会构成一个很好的天心啊,不同电线产生的干扰波会相互抵消,从而降低电线的辐射
* 由于噪声对两根电线的干扰是相同的,所以它们之间的**电压差不会改变**,因此信号通常以两根电线的**电压差**来承载.
* 双绞线既可以传输模拟信号也可以传输数字信号.所获得的带宽取决于导线的直径以及传输距离的远近.

* 5类双绞线:由两根绝缘导线扭在一起,4对这样的双绞线套在一个塑料保护套内.  

![](https://ws1.sinaimg.cn/large/0077h8xtly1fq2zpipjw7j30f2069q3j.jpg)

#### 屏蔽双绞线
屏蔽双绞线在每对双绞线外面加了一个屏蔽层,然后在整个线缆外面再加一个屏蔽层.能够减弱外部干扰和附近线缆的串扰.

### 3. 光纤
![](https://ws1.sinaimg.cn/large/0077h8xtly1fq31d0op3fj30ah06zaa9.jpg)  

光纤通过光脉冲传递信号,一个光猫重重表示比特1,没有光脉冲表示比特0  
* 由于任何入射角度大于临界值的光束都会在内部反射,所以许多不同的光束以不同的角度来回反射着 向前传播,每一束光都有不同的模式,一根具有这种特性的光纤称为**多模光纤**
* 如果光纤的直径减小到只有几个光波波长大小的时候,光只能按照直线传播而不会反射,这种光纤是**单模光纤**

## 三.无线传输
### 1. 电磁频谱
* 电磁波每秒震动的次数成为它的频率,用f表示,单位Hz
* 两个相邻的波峰或波谷之间的距离称为波长,用$\lambda$表示.
* 在真空中,所有的电磁波按同样的速度传播,跟它们的频率无关.  
	$\lambda f = c$

电磁传播通信的三种使用方式:
1. 跳频扩频
2. 直接序列扩频
3. 超宽带通信

### 2. 无线电传输
无线电频率波形很容易产生,可以传输很长的距离,并且很容易穿透建筑物.  
无线电波的特性与频率有关.在低频部分,无线电波能够很好地穿透障碍物;但是随着信号源原来远远,其能量急剧下降.

### 3. 微波传输
* 在100MHz以上的频段,电磁波几乎按直线传播,因此它们可以被聚集成窄窄的一束.  
* 通过抛物线形状的天线(比如雷达),可以把所有的能量集中于一小束,从而获得极高的信噪比,但要求发射端和接收端的天线必须精确地相互对齐.  
* 微波按直线传播,因此每隔一段距离就需要一个中继器.

### 4. 红外传输
* 红外波被广泛应用与短程通信,如电视机遥控器等.
* 红外传播具有方向性,便宜并且易于制造,但不能穿过固体物体.


## 四.数字调制与多路复用
通过有线和无线信道可以运载模拟信号(如连续变化的电压,光照强度或声音强度),为了发送数字信息,必须设法用模拟信号来表示比特.**比特与代表它们的信号之间转换的过程称为数字调制**
* 基带传输:信号的传输战友传输介质上从零到最大频率之间的全部频率.
* 通带传输:信号占据了以载波信号频率为中心的一段频带.
* 多路复用技术:一条信道用来传送多个信号

### 1. 基带传输
数字调制的最直接形式就是用正电压表示1,负电压表示0.对于光纤而言,存在可用光表示1,不存在表示0.  
![](https://ws1.sinaimg.cn/large/0077h8xtly1fq39pl5jgpj30h709saax.jpg)  
一旦NRZ信号被发出去,它就沿线缆传播.在线缆的另一端,接收器以一定的周期对信号采样,然后把采样信号转换成比特.  
接收器收到的信号与发出的不完全一样,因为信道本身会造成信号衰减和信号失真,并且接收器噪声对也会对信号造成影响.    
为了从信号中解码出比特,接收器把信号样值映射为最接近的符号.


#### 带宽效率
采用NRZ编码,每2个比特信号可能在正电压和负电压之间循环,这意味着我们需要**至少B/2Hz的带宽才能获得B bps的比特率**.信号频率越高衰减越大,可用性就越小.  
利用有限带宽的一种更有效的策略是使用两个以上的信号级别.例如采用4个电压级别,就可以用单个**符号**一次携带两个比特(即每两位比特表示一个符号).只要接收器收到的信号强度大到能够区分出信号的4个级别就可以.这样就降低了信号频率.

#### 时钟恢复
* 实际问题: 为了将数据比特编码为符号,接收器必须知道何时一个符号结束并且下一个符号开始才能对正确信号进行采样.在NRZ编码方法中,符号简单地对应为电压等级,在经过一段时间后,接收器很难区分出各个符号所对应比特的边界,比如15个0看起来像16个0.
* 为了解决这个问题,可以把**数据信号和时钟信号异或混合在一起**.
* **曼彻斯特码编码**:
    * 时钟在每个比特时间内产生一次跳变,所以它以两倍于比特率的速度运行.
    * 当时钟与0电压异或时,将时钟信号产生一次**从低到高**的转变,这种信号跳变表示逻辑0
    * 当时钟与1电压异或时,时钟信号产生一次**从高到低**的转变,这种信号跳变表示逻辑1
    * 曼彻斯特编码的缺点在于需要两倍于NRZ编码的带宽

* **NRZI不归零逆转**:
    * 1定义为信号有跳变,0定义为信号无跳变.
* **4B/5B编码**
    * 按照转换表将每4个比特被映射成5个比特.
    * 5位比特的选择使得映射结果永远不会出现连续3个0.  

    ![](https://ws1.sinaimg.cn/large/0077h8xtly1fq456ublhoj30fl06pmz8.jpg)

* **扰频/倒频编码**
    * 在发送数据之前,用一个**伪随机序列**去亦或该数据,然后接收器用相同的伪随机序列对入境数据进行亦或操作,恢复出真正的数据.

#### 平衡信号
在很短的时间内正电压和负电压一样多的信号成为平衡信号.信号的均值为0,没有直流电气分量.  
平衡提供了一个简单的校准接收器的方法,因为测量所得到的信号平均值可以作为解码符号的决策阈值.  
* 一种构造平衡码的简单方式是使用两个电压级别来表示逻辑1,比如用+1V或-1V表示1,用0V表示逻辑0.发送1时,发射器在+1V和-1V之间选择,使得它们总能达到信号平衡.

